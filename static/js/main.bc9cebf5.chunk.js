(this["webpackJsonpwheres-waldo"]=this["webpackJsonpwheres-waldo"]||[]).push([[0],{28:function(e,t,n){},30:function(e,t,n){},31:function(e,t,n){},35:function(e,t,n){},37:function(e,t,n){},38:function(e,t,n){},39:function(e,t,n){"use strict";n.r(t);var c=n(5),r=n(21),a=n.n(r),o=(n(28),n(15)),s=n(23),i=n(20),u=n(9),d=n.n(u),l=n(13),f=n(10),j=n.p+"static/media/picture.e2995e70.jpg",p=(n(30),n(31),n(11));n(40),n(33);p.a.apps.length?p.a.app():p.a.initializeApp({apiKey:"AIzaSyADxCQy9_A6MbGEvROV64IHMifVZaec5hQ",authDomain:"waldo-37e04.firebaseapp.com",projectId:"waldo-37e04",storageBucket:"waldo-37e04.appspot.com",messagingSenderId:"856550100154",appId:"1:856550100154:web:13b82c490bac63e55fc683"});p.a;var b=p.a.firestore.FieldValue.serverTimestamp(),m=p.a.auth(),h=p.a.firestore(),x=n(17),v=(n(35),n(4)),O=function(e){var t,n=e.getItems,r=e.gameStatus,a=e.setGameStatus,o=Object(c.useState)(""),s=Object(f.a)(o,2),i=s[0],u=s[1],j=Object(c.useState)(0),p=Object(f.a)(j,2),O=p[0],g=p[1],y=Object(c.useState)([]),w=Object(f.a)(y,2),S=w[0],D=w[1],k=function(){var e=Object(l.a)(d.a.mark((function e(t,n){var c,r,a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),c=m.currentUser,e.next=4,h.collection("users").doc(c.uid).set({name:n,end:b},{merge:!0});case 4:return e.next=6,h.collection("users").doc(c.uid).get();case 6:if(r=e.sent,a=50*Math.max(0,500-(r.data().end.seconds-r.data().start.seconds)),g(a),console.log("data score",r.data().score),!(a>r.data().score)){e.next=13;break}return e.next=13,h.collection("users").doc(c.uid).set({score:a},{merge:!0});case 13:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),I=function(){var e=Object(l.a)(d.a.mark((function e(t){var n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.next=3,k(t,i);case 3:a("over"),n=[],h.collection("users").where("score","!=",0).orderBy("score","desc").limit(5).get().then((function(e){e.forEach((function(e){n.push(e.data())})),D(n)}));case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return"enter-name"===r&&(t=Object(v.jsx)("div",{children:Object(v.jsxs)("form",{onSubmit:I,id:"name-form",children:[Object(v.jsx)("p",{children:"Name:"}),Object(v.jsx)("input",{id:"name-input",type:"text",onChange:function(e){e.preventDefault();var t=e.target.value;u(t)},value:i}),Object(v.jsx)("button",{id:"submit-button",type:"submit",children:"Submit"})]})})),"over"===r&&(t=Object(v.jsxs)("div",{id:"game-over-text",children:[Object(v.jsx)("h2",{id:"game-over-header",children:"Game Over"}),Object(v.jsxs)("p",{id:"your-score-text",children:["Your Score - ",O]}),Object(v.jsx)("h3",{children:"Top Scores:"}),S.map((function(e){return Object(v.jsxs)("p",{className:"score-text",children:[e.name," - ",e.score]},e.name+e.score)})),Object(v.jsx)(x.a,{id:"redo-button",onClick:function(e){e.preventDefault(),n(),a("setup")}})]})),"setup"===r&&(t=Object(v.jsxs)("div",{onClick:function(e){e.preventDefault(),function(e){e.preventDefault();var t=m.currentUser;h.collection("users").doc(t.uid).get().then((function(e){e.exists?(console.log("sub-collection  existed"),h.collection("users").doc(t.uid).set({start:b},{merge:!0}).catch((function(e){console.error("Error writing new message to database",e)}))):(console.log("add"),h.collection("users").doc(t.uid).set({name:"anon",score:0,start:b,end:""}).catch((function(e){console.error("Error writing new message to database",e)})))}))}(e),a("in-game")},id:"start-text",children:[Object(v.jsx)("h2",{children:"Start Game"}),Object(v.jsx)("p",{id:"instructions",children:"Drag & Drop Items From the Sidebar"})]})),"in-game"===r&&(t=null),Object(v.jsx)("div",{id:"game-menu",children:t})},g=(n(37),function(e){var t=e.setDragItem,n=e.itemsArray,c=e.gameStatus,r=function(e){t(e.target.getAttribute("data-text"))};return Object(v.jsxs)("div",{id:"sidebar",children:[Object(v.jsx)("h2",{children:"Find:"}),n.map((function(e){return Object(v.jsx)("p",{style:!0!==e.chosen&&"in-game"===c?{cursor:"pointer"}:{textDecoration:"line-through",opacity:"50%",cursor:"default",display:"none"},draggable:!0!==e.chosen&&"in-game"===c?"true":"false",onDragStart:r,"data-text":e.text,children:e.text},e.text)}))]})}),y=n(22),w=function(){var e=Object(c.useState)({x:0,y:0}),t=Object(f.a)(e,2),n=t[0],r=t[1],a=Object(c.useState)([]),u=Object(f.a)(a,2),p=u[0],w=u[1],S=Object(c.useState)(""),D=Object(f.a)(S,2),k=D[0],I=D[1],E=Object(c.useState)(""),A=Object(f.a)(E,2),C=A[0],G=A[1],P=Object(c.useState)("setup"),B=Object(f.a)(P,2),N=B[0],T=B[1],Y=n.x,F=n.y,M=function(e){return h.collection("levels").doc("celebration").collection("items").doc(e.text).get().then((function(e){if(Y>=e.data().coordX-50&&Y<=e.data().coordX+50&&F>=e.data().coordY-50&&F<=e.data().coordY+50)return!0}))},U=function(){var e=[];h.collection("levels").doc("celebration").collection("items").limit(3).get().then((function(t){t.forEach((function(t){e.push(t.data())})),w(e)}))};Object(c.useEffect)((function(){U()}),[]),Object(c.useEffect)((function(){m.signInAnonymously().then((function(){})).catch((function(e){console.log(e.message)}))}),[]);var V=function(){var e=Object(l.a)(d.a.mark((function e(){var t;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=m.currentUser,e.next=3,h.collection("users").doc(t.uid).set({end:b},{merge:!0});case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(c.useEffect)((function(){p.length>0&&!0===p.every((function(e){return!0===e.chosen}))&&(T("enter-name"),V())}),[p]);var X=function(e){return p.find((function(t){return e===t.text}))};function z(){return(z=Object(l.a)(d.a.mark((function e(t,n){var c,r;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),c=X(n),e.prev=2,e.next=5,M(c);case 5:!0===e.sent?(r=p.findIndex((function(e){return e.text===c.text})),w((function(e){return Object(s.a)(e)}),Object(o.a)({},p[r],p[r].chosen=!0)),J("Correct")):J("Wrong"),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(2),console.log(e.t0);case 12:case"end":return e.stop()}}),e,null,[[2,9]])})))).apply(this,arguments)}var J=function(e){G(e);var t=document.getElementById("check");t.style.setProperty("opacity","100"),t.style.setProperty("visibility","visible"),setTimeout((function(){t.style.setProperty("opacity","0")}),750),setTimeout((function(){t.style.setProperty("visibility","hidden")}),1e3)};return Object(v.jsx)("div",{children:Object(v.jsxs)("div",{id:"container",children:[Object(v.jsx)("div",{id:"check",children:Object(v.jsxs)("div",{id:"check-text",children:["Correct"===C?Object(v.jsx)(y.a,{id:"check-mark"}):Object(v.jsx)(x.b,{id:"x-mark"}),Object(v.jsx)("p",{children:C})]})}),Object(v.jsx)(O,{getItems:U,gameStatus:N,setGameStatus:T}),Object(v.jsxs)("div",{id:"board",children:[Object(v.jsx)(g,{setDragItem:I,itemsArray:p,gameStatus:N}),Object(v.jsx)("img",{className:"picture",src:j,alt:"",onDrop:function(e){e.stopPropagation(),e.preventDefault(),function(e,t){z.apply(this,arguments)}(e,k)},onDragOver:function(e){e.preventDefault(),r((function(t){return Object(i.a)(Object(i.a)({},t),{},{x:e.nativeEvent.offsetX,y:e.nativeEvent.offsetY})}))}})]})]})})};n(38);var S=function(){return Object(v.jsx)("div",{className:"app",children:Object(v.jsx)(w,{})})};a.a.render(Object(v.jsx)(S,{}),document.getElementById("root"))}},[[39,1,2]]]);
//# sourceMappingURL=main.bc9cebf5.chunk.js.map