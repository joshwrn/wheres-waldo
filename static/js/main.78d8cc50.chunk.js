(this["webpackJsonpwheres-waldo"]=this["webpackJsonpwheres-waldo"]||[]).push([[0],{28:function(e,t,n){},30:function(e,t,n){},31:function(e,t,n){},35:function(e,t,n){},37:function(e,t,n){},38:function(e,t,n){},39:function(e,t,n){"use strict";n.r(t);var c=n(5),r=n(21),a=n.n(r),o=(n(28),n(15)),s=n(23),i=n(20),u=n(10),d=n.n(u),l=n(14),f=n(9),j=n.p+"static/media/picture.e2995e70.jpg",b=(n(30),n(31),n(11));n(40),n(33);b.a.apps.length?b.a.app():b.a.initializeApp({apiKey:"AIzaSyADxCQy9_A6MbGEvROV64IHMifVZaec5hQ",authDomain:"waldo-37e04.firebaseapp.com",projectId:"waldo-37e04",storageBucket:"waldo-37e04.appspot.com",messagingSenderId:"856550100154",appId:"856550100154:web:13b82c490bac63e55fc683"});b.a;var p=b.a.firestore.FieldValue.serverTimestamp(),m=b.a.auth(),h=b.a.firestore(),v=n(17),x=(n(35),n(4)),O=function(e){var t,n=e.getItems,r=e.gameStatus,a=e.setGameStatus,o=Object(c.useState)(""),s=Object(f.a)(o,2),i=s[0],u=s[1],j=Object(c.useState)(0),b=Object(f.a)(j,2),O=b[0],g=b[1],y=Object(c.useState)([]),S=Object(f.a)(y,2),w=S[0],D=S[1],k=function(){var e=Object(l.a)(d.a.mark((function e(t,n){var c,r,a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),c=m.currentUser,e.next=4,h.collection("users").doc(c.uid).set({name:n,end:p},{merge:!0});case 4:return e.next=6,h.collection("users").doc(c.uid).get();case 6:if(r=e.sent,a=50*Math.max(0,500-(r.data().end.seconds-r.data().start.seconds)),g(a),console.log("data score",r.data().score),!(a>r.data().score)){e.next=13;break}return e.next=13,h.collection("users").doc(c.uid).set({score:a},{merge:!0});case 13:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}();return"enter-name"===r&&(t=Object(x.jsx)("div",{children:Object(x.jsxs)("form",{onSubmit:function(e){e.preventDefault(),k(e,i),a("over");var t=[];h.collection("users").limit(10).get().then((function(e){e.forEach((function(e){t.push(e.data())})),D(t)}))},id:"name-form",children:[Object(x.jsx)("p",{children:"Name:"}),Object(x.jsx)("input",{id:"name-input",type:"text",onChange:function(e){e.preventDefault();var t=e.target.value;u(t)},value:i}),Object(x.jsx)("button",{id:"submit-button",type:"submit",children:"Submit"})]})})),"over"===r&&(t=Object(x.jsxs)("div",{id:"game-over-text",children:[Object(x.jsx)("h2",{id:"game-over-header",children:"Game Over"}),Object(x.jsxs)("p",{id:"your-score-text",children:["Your Score - ",O]}),Object(x.jsx)("h3",{children:"Top Scores:"}),w.map((function(e){return Object(x.jsxs)("p",{className:"score-text",children:[e.name," - ",e.score]},e.name+e.score)})),Object(x.jsx)(v.a,{id:"redo-button",onClick:function(e){e.preventDefault(),n(),a("setup")}})]})),"setup"===r&&(t=Object(x.jsx)("div",{onClick:function(e){e.preventDefault(),function(e){e.preventDefault();var t=m.currentUser;h.collection("users").doc(t.uid).get().then((function(e){void 0===e.data().score?(console.log("add"),h.collection("users").doc(t.uid).set({name:"anon",score:0,start:p,end:""}).catch((function(e){console.error("Error writing new message to database",e)}))):(console.log("sub-collection  existed"),h.collection("users").doc(t.uid).set({start:p},{merge:!0}).catch((function(e){console.error("Error writing new message to database",e)})))}))}(e),a("in-game")},id:"start-text",children:Object(x.jsx)("h2",{children:"Start Game"})})),"in-game"===r&&(t=null),Object(x.jsx)("div",{id:"game-menu",children:t})},g=(n(37),function(e){var t=e.setDragItem,n=e.itemsArray,c=e.gameStatus,r=function(e){t(e.target.getAttribute("data-text"))};return Object(x.jsxs)("div",{id:"sidebar",children:[Object(x.jsx)("h2",{children:"Find:"}),n.map((function(e){return Object(x.jsx)("p",{style:!0!==e.chosen&&"in-game"===c?{cursor:"pointer"}:{textDecoration:"line-through",opacity:"50%",cursor:"default",display:"none"},draggable:!0!==e.chosen&&"in-game"===c?"true":"false",onDragStart:r,"data-text":e.text,children:e.text},e.text)}))]})}),y=n(22),S=function(){var e=Object(c.useState)({x:0,y:0}),t=Object(f.a)(e,2),n=t[0],r=t[1],a=Object(c.useState)([]),u=Object(f.a)(a,2),b=u[0],S=u[1],w=Object(c.useState)(""),D=Object(f.a)(w,2),k=D[0],I=D[1],E=Object(c.useState)(""),A=Object(f.a)(E,2),C=A[0],G=A[1],P=Object(c.useState)("setup"),N=Object(f.a)(P,2),T=N[0],Y=N[1],B=n.x,M=n.y,U=function(e){return h.collection("levels").doc("celebration").collection("items").doc(e.text).get().then((function(e){if(B>=e.data().coordX-50&&B<=e.data().coordX+50&&M>=e.data().coordY-50&&M<=e.data().coordY+50)return!0}))},V=function(){var e=[];h.collection("levels").doc("celebration").collection("items").get().then((function(t){t.forEach((function(t){e.push(t.data())})),S(e)}))};Object(c.useEffect)((function(){V()}),[]),Object(c.useEffect)((function(){m.signInAnonymously().then((function(){})).catch((function(e){console.log(e.message)}))}),[]);var X=function(){var e=Object(l.a)(d.a.mark((function e(){var t;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=m.currentUser,e.next=3,h.collection("users").doc(t.uid).set({end:p},{merge:!0});case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(c.useEffect)((function(){b.length>0&&!0===b.every((function(e){return!0===e.chosen}))&&(Y("enter-name"),X())}),[b]);var z=function(e){return b.find((function(t){return e===t.text}))};function F(){return(F=Object(l.a)(d.a.mark((function e(t,n){var c,r;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),c=z(n),e.prev=2,e.next=5,U(c);case 5:!0===e.sent?(r=b.findIndex((function(e){return e.text===c.text})),S((function(e){return Object(s.a)(e)}),Object(o.a)({},b[r],b[r].chosen=!0)),J("Correct")):J("Wrong"),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(2),console.log(e.t0);case 12:case"end":return e.stop()}}),e,null,[[2,9]])})))).apply(this,arguments)}var J=function(e){G(e);var t=document.getElementById("check");t.style.setProperty("opacity","100"),t.style.setProperty("visibility","visible"),setTimeout((function(){t.style.setProperty("opacity","0")}),750),setTimeout((function(){t.style.setProperty("visibility","hidden")}),1e3)};return Object(x.jsx)("div",{children:Object(x.jsxs)("div",{id:"container",children:[Object(x.jsx)("div",{id:"check",children:Object(x.jsxs)("div",{id:"check-text",children:["Correct"===C?Object(x.jsx)(y.a,{id:"check-mark"}):Object(x.jsx)(v.b,{id:"x-mark"}),Object(x.jsx)("p",{children:C})]})}),Object(x.jsx)(O,{getItems:V,gameStatus:T,setGameStatus:Y}),Object(x.jsxs)("div",{id:"board",children:[Object(x.jsx)(g,{setDragItem:I,itemsArray:b,gameStatus:T}),Object(x.jsx)("img",{className:"picture",src:j,alt:"",onDrop:function(e){e.stopPropagation(),e.preventDefault(),function(e,t){F.apply(this,arguments)}(e,k)},onDragOver:function(e){e.preventDefault(),r((function(t){return Object(i.a)(Object(i.a)({},t),{},{x:e.nativeEvent.offsetX,y:e.nativeEvent.offsetY})}))}})]})]})})};n(38);var w=function(){return Object(x.jsx)("div",{className:"app",children:Object(x.jsx)(S,{})})};a.a.render(Object(x.jsx)(w,{}),document.getElementById("root"))}},[[39,1,2]]]);
//# sourceMappingURL=main.78d8cc50.chunk.js.map